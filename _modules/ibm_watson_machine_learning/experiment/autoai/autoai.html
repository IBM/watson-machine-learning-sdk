<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ibm_watson_machine_learning.experiment.autoai.autoai &#8212; ibm-watson-machine-learning(V4) 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/mystyle2.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../../../index.html">
    <img class="logo" src="../../../../_static/wml_logo2.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">IBM Watson Machine Learning</p>






<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for ibm_watson_machine_learning.experiment.autoai.autoai</h1><div class="highlight"><pre>
<span></span><span class="c1">#  -----------------------------------------------------------------------------------------</span>
<span class="c1">#  (C) Copyright IBM Corp. 2020- 2023.</span>
<span class="c1">#  https://opensource.org/licenses/BSD-3-Clause</span>
<span class="c1">#  -----------------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span>

<span class="kn">from</span> <span class="nn">ibm_watson_machine_learning.preprocessing</span> <span class="kn">import</span> <span class="n">DataJoinGraph</span>
<span class="kn">from</span> <span class="nn">ibm_watson_machine_learning.utils.autoai.enums</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TShirtSize</span><span class="p">,</span> <span class="n">ClassificationAlgorithms</span><span class="p">,</span> <span class="n">RegressionAlgorithms</span><span class="p">,</span> <span class="n">ForecastingAlgorithms</span><span class="p">,</span> <span class="n">PredictionType</span><span class="p">,</span> <span class="n">Metrics</span><span class="p">,</span> \
    <span class="n">Transformers</span><span class="p">,</span> <span class="n">DataConnectionTypes</span><span class="p">,</span> <span class="n">PipelineTypes</span><span class="p">,</span> <span class="n">PositiveLabelClass</span><span class="p">,</span> <span class="n">ClassificationAlgorithmsCP4D</span><span class="p">,</span>
    <span class="n">RegressionAlgorithmsCP4D</span><span class="p">,</span> <span class="n">ForecastingAlgorithmsCP4D</span><span class="p">,</span> <span class="n">SamplingTypes</span><span class="p">,</span> <span class="n">ImputationStrategy</span><span class="p">,</span> <span class="n">ForecastingPipelineTypes</span><span class="p">,</span>
    <span class="n">TimeseriesAnomalyPredictionPipelineTypes</span><span class="p">,</span> <span class="n">TimeseriesAnomalyPredictionAlgorithms</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">ibm_watson_machine_learning.utils.autoai.errors</span> <span class="kn">import</span> <span class="n">LocalInstanceButRemoteParameter</span><span class="p">,</span> <span class="n">MissingPositiveLabel</span><span class="p">,</span> \
    <span class="n">NonForecastPredictionColumnMissing</span><span class="p">,</span> <span class="n">ForecastPredictionColumnsMissing</span><span class="p">,</span> <span class="n">ForecastingCannotBeRunAsLocalScenario</span><span class="p">,</span> \
    <span class="n">TSNotSupported</span><span class="p">,</span> <span class="n">TSADNotSupported</span><span class="p">,</span> <span class="n">ParamOutOfRange</span><span class="p">,</span> <span class="n">ImputationListNotSupported</span><span class="p">,</span> \
    <span class="n">MissingEstimatorForExistingBatchedEstimator</span><span class="p">,</span> <span class="n">TimeseriesAnomalyPredictionFeatureColumnsMissing</span><span class="p">,</span> \
    <span class="n">TimeseriesAnomalyPredictionCannotBeRunAsLocalScenario</span><span class="p">,</span> <span class="n">TimeseriesAnomalyPredictionUnsupportedMetric</span>
<span class="kn">from</span> <span class="nn">ibm_watson_machine_learning.utils.autoai.utils</span> <span class="kn">import</span> <span class="n">check_dependencies_versions</span><span class="p">,</span> \
    <span class="n">validate_additional_params_for_optimizer</span><span class="p">,</span> <span class="n">validate_optimizer_enum_values</span><span class="p">,</span> \
    <span class="n">translate_imputation_string_strategy_to_enum</span><span class="p">,</span> <span class="n">translate_estimator_string_to_enum</span><span class="p">,</span> \
    <span class="n">translate_batched_estimator_string_to_enum</span>
<span class="kn">from</span> <span class="nn">ibm_watson_machine_learning.workspace</span> <span class="kn">import</span> <span class="n">WorkSpace</span>
<span class="kn">from</span> <span class="nn">ibm_watson_machine_learning.wml_client_error</span> <span class="kn">import</span> <span class="n">ForbiddenActionForGitBasedProject</span><span class="p">,</span> <span class="n">WMLClientError</span>
<span class="kn">from</span> <span class="nn">ibm_watson_machine_learning.messages.messages</span> <span class="kn">import</span> <span class="n">Messages</span>
<span class="kn">from</span> <span class="nn">.engines</span> <span class="kn">import</span> <span class="n">WMLEngine</span>
<span class="kn">from</span> <span class="nn">.optimizers</span> <span class="kn">import</span> <span class="n">LocalAutoPipelines</span><span class="p">,</span> <span class="n">RemoteAutoPipelines</span>
<span class="kn">from</span> <span class="nn">.runs</span> <span class="kn">import</span> <span class="n">AutoPipelinesRuns</span><span class="p">,</span> <span class="n">LocalAutoPipelinesRuns</span>
<span class="kn">from</span> <span class="nn">..base_experiment.base_experiment</span> <span class="kn">import</span> <span class="n">BaseExperiment</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;AutoAI&quot;</span>
<span class="p">]</span>


<div class="viewcode-block" id="AutoAI"><a class="viewcode-back" href="../../../../autoai_experiment.html#ibm_watson_machine_learning.experiment.autoai.autoai.AutoAI">[docs]</a><span class="k">class</span> <span class="nc">AutoAI</span><span class="p">(</span><span class="n">BaseExperiment</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;AutoAI class for pipeline models optimization automation.</span>

<span class="sd">    :param wml_credentials: credentials to Watson Machine Learning instance</span>
<span class="sd">    :type wml_credentials: dict</span>

<span class="sd">    :param project_id: ID of the Watson Studio project</span>
<span class="sd">    :type project_id: str, optional</span>

<span class="sd">    :param space_id: ID of the Watson Studio Space</span>
<span class="sd">    :type space_id: str, optional</span>

<span class="sd">    :param verify: user can pass as verify one of following:</span>

<span class="sd">        - the path to a CA_BUNDLE file</span>
<span class="sd">        - the path of directory with certificates of trusted CAs</span>
<span class="sd">        - `True` - default path to truststore will be taken</span>
<span class="sd">        - `False` - no verification will be made</span>
<span class="sd">    :type verify: bool or str, optional</span>

<span class="sd">    **Example**</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        from ibm_watson_machine_learning.experiment import AutoAI</span>

<span class="sd">        experiment = AutoAI(</span>
<span class="sd">            wml_credentials={</span>
<span class="sd">                &quot;apikey&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;iam_apikey_description&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;iam_apikey_name&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;iam_role_crn&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;iam_serviceid_crn&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;instance_id&quot;: &quot;...&quot;,</span>
<span class="sd">                &quot;url&quot;: &quot;https://us-south.ml.cloud.ibm.com&quot;</span>
<span class="sd">            },</span>
<span class="sd">            project_id=&quot;...&quot;,</span>
<span class="sd">            space_id=&quot;...&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># note: initialization of AutoAI enums as class properties</span>

    <span class="c1"># note: Enums with estimators can be overwritten  in _init based on environment type (CPD or Cloud)</span>
    <span class="n">ClassificationAlgorithms</span> <span class="o">=</span> <span class="n">ClassificationAlgorithms</span>
    <span class="n">RegressionAlgorithms</span> <span class="o">=</span> <span class="n">RegressionAlgorithms</span>
    <span class="n">ForecastingAlgorithms</span> <span class="o">=</span> <span class="n">ForecastingAlgorithms</span>
    <span class="c1"># end note</span>
    <span class="n">TShirtSize</span> <span class="o">=</span> <span class="n">TShirtSize</span>
    <span class="n">PredictionType</span> <span class="o">=</span> <span class="n">PredictionType</span>
    <span class="n">Metrics</span> <span class="o">=</span> <span class="n">Metrics</span>
    <span class="n">Transformers</span> <span class="o">=</span> <span class="n">Transformers</span>
    <span class="n">DataConnectionTypes</span> <span class="o">=</span> <span class="n">DataConnectionTypes</span>
    <span class="n">PipelineTypes</span> <span class="o">=</span> <span class="n">PipelineTypes</span>
    <span class="n">SamplingTypes</span> <span class="o">=</span> <span class="n">SamplingTypes</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">wml_credentials</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="s1">&#39;WorkSpace&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">project_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">space_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">verify</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># note: as workspace is not clear enough to understand, there is a possibility to use pure</span>
        <span class="c1"># wml credentials with project and space IDs, but in addition we</span>
        <span class="c1"># leave a possibility to use a previous WorkSpace implementation, it could be passed as a first argument</span>
        <span class="k">if</span> <span class="n">wml_credentials</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">runs</span> <span class="o">=</span> <span class="n">LocalAutoPipelinesRuns</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wml_credentials</span><span class="p">,</span> <span class="n">WorkSpace</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="n">wml_credentials</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="n">WorkSpace</span><span class="p">(</span><span class="n">wml_credentials</span><span class="o">=</span><span class="n">wml_credentials</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
                                            <span class="n">project_id</span><span class="o">=</span><span class="n">project_id</span><span class="p">,</span>
                                            <span class="n">space_id</span><span class="o">=</span><span class="n">space_id</span><span class="p">,</span>
                                            <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">project_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">project_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">space_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">space_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">runs</span> <span class="o">=</span> <span class="n">AutoPipelinesRuns</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="n">WMLEngine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">runs</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span>

        <span class="c1">#self._block_autoai_on_git_based_project()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init_estimator_enums</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_20_class_limit_removal_test</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># --- end note</span>

<div class="viewcode-block" id="AutoAI.runs"><a class="viewcode-back" href="../../../../autoai_experiment.html#ibm_watson_machine_learning.experiment.autoai.autoai.AutoAI.runs">[docs]</a>    <span class="k">def</span> <span class="nf">runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s1">&#39;AutoPipelinesRuns&#39;</span><span class="p">,</span> <span class="s1">&#39;LocalAutoPipelinesRuns&#39;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the historical runs but with WML Pipeline name filter (for remote scenario).</span>
<span class="sd">        Get the historical runs but with experiment name filter (for local scenario).</span>

<span class="sd">        :param filter: WML Pipeline name to filter the historical runs or experiment name to filter</span>
<span class="sd">            the local historical runs</span>
<span class="sd">        :type filter: str</span>

<span class="sd">        :return: object managing the list of runs</span>
<span class="sd">        :rtype: AutoPipelinesRuns or LocalAutoPipelinesRuns</span>

<span class="sd">        **Example**</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from ibm_watson_machine_learning.experiment import AutoAI</span>

<span class="sd">            experiment = AutoAI(...)</span>
<span class="sd">            experiment.runs(filter=&#39;Test&#39;).list()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LocalAutoPipelinesRuns</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AutoPipelinesRuns</span><span class="p">(</span><span class="n">engine</span><span class="o">=</span><span class="n">WMLEngine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="p">),</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span></div>

<div class="viewcode-block" id="AutoAI.optimizer"><a class="viewcode-back" href="../../../../autoai_experiment.html#ibm_watson_machine_learning.experiment.autoai.autoai.AutoAI.optimizer">[docs]</a>    <span class="k">def</span> <span class="nf">optimizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                  <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                  <span class="o">*</span><span class="p">,</span>
                  <span class="n">prediction_type</span><span class="p">:</span> <span class="s1">&#39;PredictionType&#39;</span><span class="p">,</span>
                  <span class="n">prediction_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">prediction_columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">timestamp_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">scoring</span><span class="p">:</span> <span class="s1">&#39;Metrics&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">test_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># deprecated</span>
                  <span class="n">holdout_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">max_number_of_estimators</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">train_sample_rows_test_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">include_only_estimators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s1">&#39;ClassificationAlgorithms&#39;</span><span class="p">,</span> <span class="s1">&#39;RegressionAlgorithms&#39;</span><span class="p">,</span>
                                                      <span class="s1">&#39;ForecastingAlgorithms&#39;</span><span class="p">,</span> <span class="s1">&#39;TimeseriesAnomalyPredictionAlgorithms&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">daub_include_only_estimators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s1">&#39;ClassificationAlgorithms&#39;</span><span class="p">,</span> <span class="s1">&#39;RegressionAlgorithms&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># deprecated</span>
                  <span class="n">include_batched_ensemble_estimators</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s1">&#39;BatchedClassificationAlgorithms&#39;</span><span class="p">,</span>
                                                                  <span class="s1">&#39;BatchedRegressionAlgorithms&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">backtest_num</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">lookback_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">forecast_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">backtest_gap_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">feature_columns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">pipeline_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s1">&#39;ForecastingPipelineTypes&#39;</span><span class="p">,</span> <span class="s1">&#39;TimeseriesAnomalyPredictionPipelineTypes&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">supporting_features_at_forecast</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">cognito_transform_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Transformers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">data_join_graph</span><span class="p">:</span> <span class="s1">&#39;DataJoinGraph&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">csv_separator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span>
                  <span class="n">excel_sheet</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
                  <span class="n">positive_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">data_join_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                  <span class="n">drop_duplicates</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                  <span class="n">outliers_columns</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">text_processing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">word2vec_feature_number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">daub_give_priority_to_runtime</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">fairness_info</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">sampling_type</span><span class="p">:</span> <span class="s1">&#39;SamplingTypes&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">sample_size_limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">sample_rows_limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">sample_percentage_limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">n_parallel_data_connections</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">number_of_batch_rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">categorical_imputation_strategy</span><span class="p">:</span> <span class="n">ImputationStrategy</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">numerical_imputation_strategy</span><span class="p">:</span> <span class="n">ImputationStrategy</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">numerical_imputation_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">imputation_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">retrain_on_holdout</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">categorical_columns</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">numerical_columns</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">test_data_csv_separator</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span>
                  <span class="n">test_data_excel_sheet</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">test_data_encoding</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>
                  <span class="n">confidence_level</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">incremental_learning</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">early_stop_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="n">early_stop_window_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s1">&#39;RemoteAutoPipelines&#39;</span><span class="p">,</span> <span class="s1">&#39;LocalAutoPipelines&#39;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an AutoAi optimizer.</span>

<span class="sd">        :param name: name for the AutoPipelines</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :param prediction_type: type of the prediction</span>
<span class="sd">        :type prediction_type: PredictionType</span>

<span class="sd">        :param prediction_column: name of the target/label column, required for `multiclass`, `binary` and `regression`</span>
<span class="sd">            prediction types</span>
<span class="sd">        :type prediction_column: str, optional</span>

<span class="sd">        :param prediction_columns: names of the target/label columns, required for `forecasting` prediction type</span>
<span class="sd">        :type prediction_columns: list[str], optional</span>

<span class="sd">        :param timestamp_column_name: name of timestamp column for time series forecasting</span>
<span class="sd">        :type timestamp_column_name: str, optional</span>

<span class="sd">        :param scoring: type of the metric to optimize with, not used for forecasting</span>
<span class="sd">        :type scoring: Metrics, optional</span>

<span class="sd">        :param desc: description</span>
<span class="sd">        :type desc: str, optional</span>

<span class="sd">        :param test_size: deprecated, use `holdout_size` instead</span>

<span class="sd">        :param holdout_size: percentage of the entire dataset to leave as a holdout</span>
<span class="sd">        :type holdout_size: float, optional</span>

<span class="sd">        :param max_number_of_estimators: maximum number (top-K ranked by DAUB model selection)</span>
<span class="sd">            of the selected algorithm, or estimator types, for example `LGBMClassifierEstimator`,</span>
<span class="sd">            `XGBoostClassifierEstimator`, or `LogisticRegressionEstimator` to use in pipeline composition,</span>
<span class="sd">            the default is `None` that means the true default value will be determined by</span>
<span class="sd">            the internal different algorithms, where only the highest ranked by model selection algorithm type is used</span>
<span class="sd">        :type max_number_of_estimators: int, optional</span>

<span class="sd">        :param train_sample_rows_test_size: training data sampling percentage</span>
<span class="sd">        :type train_sample_rows_test_size: float, optional</span>

<span class="sd">        :param daub_include_only_estimators: deprecated, use `include_only_estimators` instead</span>
<span class="sd">        </span>
<span class="sd">        :param include_batched_ensemble_estimators: list of batched ensemble estimators to include </span>
<span class="sd">            in computation process, see: AutoAI.BatchedClassificationAlgorithms, AutoAI.BatchedRegressionAlgorithms</span>
<span class="sd">        :type include_batched_ensemble_estimators: </span>
<span class="sd">            list[BatchedClassificationAlgorithms or BatchedRegressionAlgorithms], optional</span>

<span class="sd">        :param include_only_estimators: list of estimators to include in computation process, see:</span>
<span class="sd">            AutoAI.ClassificationAlgorithms, AutoAI.RegressionAlgorithms or AutoAI.ForecastingAlgorithms</span>
<span class="sd">        :type include_only_estimators: List[ClassificationAlgorithms or RegressionAlgorithms or ForecastingAlgorithms]], optional</span>

<span class="sd">        :param backtest_num: number of backtests used for forecasting prediction type, default value: 4,</span>
<span class="sd">            value from range [0, 20]</span>
<span class="sd">        :type backtest_num: int, optional</span>

<span class="sd">        :param lookback_window: length of lookback window used for forecasting prediction type,</span>
<span class="sd">            default value: 10, if set to -1 lookback window will be auto-detected</span>
<span class="sd">        :type lookback_window: int, optional</span>

<span class="sd">        :param forecast_window: length of forecast window used for forecasting prediction type, default value: 1,</span>
<span class="sd">            value from range [1, 60]</span>
<span class="sd">        :type forecast_window: int, optional</span>

<span class="sd">        :param backtest_gap_length: gap between backtests used for forecasting prediction type,</span>
<span class="sd">            default value: 0, value from range [0, data length / 4]</span>
<span class="sd">        :type backtest_gap_length: int, optional</span>

<span class="sd">        :param feature_columns: list of feature columns used for forecasting prediction type,</span>
<span class="sd">            may contain target column and/or supporting feature columns, list of columns to be detected whether there are anomalies for timeseries anomaly prediction type</span>
<span class="sd">        :type feature_columns: list[str], optional</span>

<span class="sd">        :param pipeline_types: list of pipeline types to be used for forecasting or timeseries anomaly prediction type</span>
<span class="sd">        :type pipeline_types: list[ForecastingPipelineTypes or TimeseriesAnomalyPredictionPipelineTypes], optional</span>

<span class="sd">        :param supporting_features_at_forecast: enables usage of future supporting feature values during forecast</span>
<span class="sd">        :type supporting_features_at_forecast: bool, optional</span>

<span class="sd">        :param cognito_transform_names: list of transformers to include in the feature enginnering computation process,</span>
<span class="sd">            see: AutoAI.Transformers</span>
<span class="sd">        :type cognito_transform_names: list[Transformers], optional</span>

<span class="sd">        :param csv_separator: the separator, or list of separators to try for separating columns in a CSV file,</span>
<span class="sd">            not used if the file_name is not a CSV file, default is &#39;,&#39;</span>
<span class="sd">        :type csv_separator: list[str] or str, optional</span>

<span class="sd">        :param excel_sheet: name of the excel sheet to use, only applicable when xlsx file is an input,</span>
<span class="sd">            support for number of the sheet is deprecated, by default first sheet is used</span>
<span class="sd">        :type excel_sheet: str, optional</span>

<span class="sd">        :param encoding: encoding type for CSV training file</span>
<span class="sd">        :type encoding: str, optional</span>

<span class="sd">        :param positive_label: the positive class to report when binary classification, when multiclass or regression,</span>
<span class="sd">            this will be ignored</span>
<span class="sd">        :type positive_label: str, optional</span>

<span class="sd">        :param t_shirt_size: the size of the remote AutoAI POD instance (computing resources),</span>
<span class="sd">            only applicable to a remote scenario, see: AutoAI.TShirtSize</span>
<span class="sd">        :type t_shirt_size: TShirtSize, optional</span>

<span class="sd">        :param data_join_graph: a graph object with definition of join structure for multiple input data sources,</span>
<span class="sd">            data preprocess step for multiple files</span>
<span class="sd">        :type data_join_graph: DataJoinGraph, optional</span>

<span class="sd">        :param data_join_only: if `True` only preprocessing will be executed</span>
<span class="sd">        :type data_join_only: bool, optional</span>

<span class="sd">        :param drop_duplicates: if `True` duplicated rows in data will be removed before further processing</span>
<span class="sd">        :type drop_duplicates: bool, optional</span>

<span class="sd">        :param outliers_columns: replace outliers with NaN using IQR method for specified columns. By default,</span>
<span class="sd">            turned ON for regression learning_type and target column. To turn OFF empty list of columns must be passed</span>
<span class="sd">        :type outliers_columns: list, optional</span>

<span class="sd">        :param text_processing: if `True` text processing will be enabled, applicable only on Cloud</span>
<span class="sd">        :type text_processing: bool, optional</span>

<span class="sd">        :param word2vec_feature_number: number of features which will be generated from text column,</span>
<span class="sd">            will be applied only if `text_processing` is `True`, if `None` the default value will be taken</span>
<span class="sd">        :type word2vec_feature_number: int, optional</span>

<span class="sd">        :param daub_give_priority_to_runtime: the importance of run time over score for pipelines ranking,</span>
<span class="sd">            can take values between 0 and 5, if set to 0.0 only score is used,</span>
<span class="sd">            if set to 1 equally score and runtime are used, if set to value higher than 1</span>
<span class="sd">            the runtime gets higher importance over score</span>
<span class="sd">        :type daub_give_priority_to_runtime: float, optional</span>

<span class="sd">        :param fairness_info: dictionary that specifies metadata needed for measuring fairness,</span>
<span class="sd">            it contains three key values: `favorable_labels`, `unfavorable_labels` and `protected_attributes`,</span>
<span class="sd">            the `favorable_labels` attribute indicates that when the class column contains one of the value from list,</span>
<span class="sd">            that is considered a positive outcome, the `unfavorable_labels` is oposite to the `favorable_labels`</span>
<span class="sd">            and is obligatory for regression learning type, a protected attribute is a list of features that partition</span>
<span class="sd">            the population into groups whose outcome should have parity, if protected attribute is empty list</span>
<span class="sd">            then automatic detection of protected attributes will be run,</span>
<span class="sd">            if `fairness_info` is passed then fairness metric will be calculated</span>
<span class="sd">        :type fairness_info: fairness_info</span>

<span class="sd">        :param n_parallel_data_connections: number of maximum parallel connection to data source,</span>
<span class="sd">            supported only for IBM Cloud Pak® for Data 4.0.1 and above</span>
<span class="sd">        :type n_parallel_data_connections: int, optional</span>

<span class="sd">        :param categorical_imputation_strategy: missing values imputation strategy for categorical columns</span>

<span class="sd">            Possible values (only non-forecasting scenario):</span>

<span class="sd">            - ImputationStrategy.MEAN</span>
<span class="sd">            - ImputationStrategy.MEDIAN</span>
<span class="sd">            - ImputationStrategy.MOST_FREQUENT (default)</span>

<span class="sd">        :type categorical_imputation_strategy: ImputationStrategy, optional</span>


<span class="sd">        :param numerical_imputation_strategy: missing values imputation strategy for numerical columns</span>

<span class="sd">            Possible values (non-forecasting scenario):</span>

<span class="sd">            - ImputationStrategy.MEAN</span>
<span class="sd">            - ImputationStrategy.MEDIAN (default)</span>
<span class="sd">            - ImputationStrategy.MOST_FREQUENT</span>

<span class="sd">            Possible values (forecasting scenario):</span>

<span class="sd">            - ImputationStrategy.MEAN</span>
<span class="sd">            - ImputationStrategy.MEDIAN</span>
<span class="sd">            - ImputationStrategy.BEST_OF_DEFAULT_IMPUTERS (default)</span>
<span class="sd">            - ImputationStrategy.VALUE</span>
<span class="sd">            - ImputationStrategy.FLATTEN_ITERATIVE</span>
<span class="sd">            - ImputationStrategy.LINEAR</span>
<span class="sd">            - ImputationStrategy.CUBIC</span>
<span class="sd">            - ImputationStrategy.PREVIOUS</span>
<span class="sd">            - ImputationStrategy.NEXT</span>
<span class="sd">            - ImputationStrategy.NO_IMPUTATION</span>

<span class="sd">        :param numerical_imputation_value: value for filling missing values if numerical_imputation_strategy</span>
<span class="sd">            is set to ImputationStrategy.VALUE, for forecasting only</span>
<span class="sd">        :type numerical_imputation_value: float, optional</span>

<span class="sd">        :param imputation_threshold: maximum threshold of missing values imputation, for forecasting only</span>
<span class="sd">        :type imputation_threshold: float, optional</span>

<span class="sd">        :param retrain_on_holdout: if True final pipelines will be train also on holdout data</span>
<span class="sd">        :type retrain_on_holdout: bool, optional</span>

<span class="sd">        :param categorical_columns: list of columns names that must be treated as categorical</span>
<span class="sd">        :type categorical_columns: list, optional</span>

<span class="sd">        :param numerical_columns: list of columns names that must be treated as numerical</span>
<span class="sd">        :type numerical_columns: list, optional</span>

<span class="sd">        :param sampling_type: type of sampling data for training, one of SamplingTypes enum values,</span>
<span class="sd">            default is SamplingTypes.FIRST_N_RECORDS, supported only for IBM Cloud Pak® for Data 4.0.1 and above</span>
<span class="sd">        :type sampling_type: str, optional</span>

<span class="sd">        :param sample_size_limit: the size of sample upper bound (in bytes). The default value is 1GB,</span>
<span class="sd">            supported only for IBM Cloud Pak® for Data 4.5 and above</span>
<span class="sd">        :type sample_size_limit: int, optional</span>

<span class="sd">        :param sample_rows_limit: the size of sample upper bound (in rows),</span>
<span class="sd">            supported only for IBM Cloud Pak® for Data 4.6 and above</span>
<span class="sd">        :type sample_rows_limit: int, optional</span>

<span class="sd">        :param sample_percentage_limit: the size of sample upper bound (as fraction of dataset size),</span>
<span class="sd">            supported only for IBM Cloud Pak® for Data 4.6 and above</span>
<span class="sd">        :type sample_percentage_limit: float, optional</span>

<span class="sd">        :param number_of_batch_rows: number of rows to read in each batch when reading from flight connection</span>
<span class="sd">        :type number_of_batch_rows: int, optional</span>

<span class="sd">        :param test_data_csv_separator: the separator, or list of separators to try for separating</span>
<span class="sd">            columns in a CSV user-defined holdout/test file, not used if the file_name is not a CSV file,</span>
<span class="sd">            default is &#39;,&#39;</span>
<span class="sd">        :type test_data_csv_separator: list[str] or str, optional</span>

<span class="sd">        :param test_data_excel_sheet: name of the excel sheet to use for user-defined holdout/test data, </span>
<span class="sd">            only use when xlsx file is an test, dataset file, by default first sheet is used</span>
<span class="sd">        :type test_data_excel_sheet: str or int, optional</span>

<span class="sd">        :param test_data_encoding: encoding type for CSV user-defined holdout/test file</span>
<span class="sd">        :type test_data_encoding: str, optional</span>

<span class="sd">        :param confidence_level: when the pipeline &quot;PointwiseBoundedHoltWinters&quot; or &quot;PointwiseBoundedBATS&quot; is used, </span>
<span class="sd">            the prediction interval is calculated at a given confidence_level to decide if a data record </span>
<span class="sd">            is an anomaly or not, optional for timeseries anomaly prediction</span>
<span class="sd">        :type confidence_level: float, optional</span>

<span class="sd">        :param incremental_learning: triggers incremental learning process for supported pipelines</span>
<span class="sd">        :type incremental_learning: bool, optional</span>

<span class="sd">        :param early_stop_enabled: enables early stop for incremental learning process</span>
<span class="sd">        :type early_stop_enabled: bool, optional</span>

<span class="sd">        :param early_stop_window_size: the number of iterations without score improvements before training stop</span>
<span class="sd">        :type early_stop_window_size: int, optional</span>

<span class="sd">        :return: RemoteAutoPipelines or LocalAutoPipelines, depends on how you initialize the AutoAI object</span>
<span class="sd">        :rtype: RemoteAutoPipelines or LocalAutoPipelines</span>

<span class="sd">        **Examples**</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from ibm_watson_machine_learning.experiment import AutoAI</span>
<span class="sd">            experiment = AutoAI(...)</span>

<span class="sd">            fairness_info = {</span>
<span class="sd">                       &quot;protected_attributes&quot;: [</span>
<span class="sd">                           {&quot;feature&quot;: &quot;Sex&quot;, &quot;reference_group&quot;: [&#39;male&#39;], &quot;monitored_group&quot;: [&#39;female&#39;]},</span>
<span class="sd">                           {&quot;feature&quot;: &quot;Age&quot;, &quot;reference_group&quot;: [[50,60]], &quot;monitored_group&quot;: [[18, 49]]}</span>
<span class="sd">                       ],</span>
<span class="sd">                       &quot;favorable_labels&quot;: [&quot;No Risk&quot;],</span>
<span class="sd">                       &quot;unfavorable_labels&quot;: [&quot;Risk&quot;],</span>
<span class="sd">                       }</span>

<span class="sd">            optimizer = experiment.optimizer(</span>
<span class="sd">                   name=&quot;name of the optimizer.&quot;,</span>
<span class="sd">                   prediction_type=AutoAI.PredictionType.BINARY,</span>
<span class="sd">                   prediction_column=&quot;y&quot;,</span>
<span class="sd">                   scoring=AutoAI.Metrics.ROC_AUC_SCORE,</span>
<span class="sd">                   desc=&quot;Some description.&quot;,</span>
<span class="sd">                   holdout_size=0.1,</span>
<span class="sd">                   max_num_daub_ensembles=1,</span>
<span class="sd">                   fairness_info= fairness_info,</span>
<span class="sd">                   cognito_transform_names=[AutoAI.Transformers.SUM,AutoAI.Transformers.MAX],</span>
<span class="sd">                   train_sample_rows_test_size=1,</span>
<span class="sd">                   include_only_estimators=[AutoAI.ClassificationAlgorithms.LGBM, AutoAI.ClassificationAlgorithms.XGB],</span>
<span class="sd">                   t_shirt_size=AutoAI.TShirtSize.L</span>
<span class="sd">               )</span>

<span class="sd">            optimizer = experiment.optimizer(</span>
<span class="sd">                   name=&quot;name of the optimizer.&quot;,</span>
<span class="sd">                   prediction_type=AutoAI.PredictionType.MULTICLASS,</span>
<span class="sd">                   prediction_column=&quot;y&quot;,</span>
<span class="sd">                   scoring=AutoAI.Metrics.ROC_AUC_SCORE,</span>
<span class="sd">                   desc=&quot;Some description.&quot;,</span>
<span class="sd">               )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># note: convert `timeseries` type to PredictionType.FORECASTING:</span>
        <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="s1">&#39;timeseries&#39;</span><span class="p">:</span>
            <span class="n">prediction_type</span> <span class="o">=</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span>


        <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">!=</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span> <span class="ow">and</span> <span class="n">retrain_on_holdout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">retrain_on_holdout</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Deprecation of excel_sheet as number:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excel_sheet</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">warn</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Support for excel sheet as number of the sheet (int) is deprecated! Please set excel sheet with name of the sheet.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">data_join_graph</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP_46</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP_47</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">WMLClientError</span><span class="p">(</span><span class="n">Messages</span><span class="o">.</span><span class="n">get_message</span><span class="p">(</span><span class="n">message_id</span><span class="o">=</span><span class="s2">&quot;obm_removal_message_cpd&quot;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">Messages</span><span class="o">.</span><span class="n">get_message</span><span class="p">(</span><span class="n">message_id</span><span class="o">=</span><span class="s2">&quot;obm_deprecation_message_cpd&quot;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">WMLClientError</span><span class="p">(</span><span class="n">Messages</span><span class="o">.</span><span class="n">get_message</span><span class="p">(</span><span class="n">message_id</span><span class="o">=</span><span class="s2">&quot;obm_removal_message_cloud&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP</span> <span class="ow">and</span> \
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">wml_credentials</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;2.5&#39;</span><span class="p">)</span> <span class="ow">or</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">wml_credentials</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;3.0&#39;</span><span class="p">)</span> <span class="ow">or</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">wml_credentials</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;3.5&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">TSNotSupported</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">TIMESERIES_ANOMALY_PREDICTION</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP</span> <span class="ow">and</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">wml_credentials</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s1">&#39;2.5&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0&#39;</span><span class="p">,</span> <span class="s1">&#39;3.5&#39;</span><span class="p">,</span> <span class="s1">&#39;4.0&#39;</span><span class="p">,</span> <span class="s1">&#39;4.5&#39;</span><span class="p">,</span> <span class="s1">&#39;4.6&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">TSADNotSupported</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">prediction_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span><span class="p">,</span> <span class="s1">&#39;timeseries&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">numerical_imputation_strategy</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">numerical_imputation_strategy</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">numerical_imputation_strategy</span> <span class="o">=</span> <span class="n">ImputationStrategy</span><span class="o">.</span><span class="n">BEST_OF_DEFAULT_IMPUTERS</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">numerical_imputation_strategy</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">numerical_imputation_strategy</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">numerical_imputation_strategy</span> <span class="o">=</span> <span class="n">ImputationStrategy</span><span class="o">.</span><span class="n">NO_IMPUTATION</span>

            <span class="k">if</span> <span class="n">prediction_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">prediction_columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ForecastPredictionColumnsMissing</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">TIMESERIES_ANOMALY_PREDICTION</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">feature_columns</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">prediction_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">prediction_columns</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">TimeseriesAnomalyPredictionFeatureColumnsMissing</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">scoring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">scoring</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
                    <span class="n">Metrics</span><span class="o">.</span><span class="n">F1_SCORE</span><span class="p">,</span> <span class="n">Metrics</span><span class="o">.</span><span class="n">ROC_AUC_SCORE</span><span class="p">,</span> <span class="n">Metrics</span><span class="o">.</span><span class="n">AVERAGE_PRECISION_SCORE</span><span class="p">,</span> <span class="n">Metrics</span><span class="o">.</span><span class="n">PRECISION_SCORE</span><span class="p">,</span>
                    <span class="n">Metrics</span><span class="o">.</span><span class="n">RECALL_SCORE</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">TimeseriesAnomalyPredictionUnsupportedMetric</span><span class="p">(</span><span class="n">scoring</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prediction_column</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">prediction_columns</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NonForecastPredictionColumnMissing</span><span class="p">(</span><span class="n">prediction_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">test_size</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Note: Using `test_size` is deprecated. Use `holdout_size` instead.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">holdout_size</span><span class="p">:</span>
                <span class="n">holdout_size</span> <span class="o">=</span> <span class="n">test_size</span>
            <span class="n">test_size</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">daub_include_only_estimators</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Note: Using `daub_include_only_estimators` is deprecated. Use `include_only_estimators` instead.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">include_only_estimators</span><span class="p">:</span>
                <span class="n">include_only_estimators</span> <span class="o">=</span> <span class="n">daub_include_only_estimators</span>
            <span class="n">daub_include_only_estimators</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">train_sample_rows_test_size</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP_46</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP_47</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Note: Using `train_sample_rows_test_size` is deprecated.&#39;</span>
                  <span class="s1">&#39;Use either `sample_rows_limit` or `sample_percentage_limit` instead.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sample_rows_limit</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">sample_percentage_limit</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">train_sample_rows_test_size</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">float</span> <span class="ow">and</span> <span class="n">train_sample_rows_test_size</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Value of `train_sample_rows_test_size` parameter&#39;</span>
                          <span class="s1">&#39;will be passed as `sample_percentage_limit`.&#39;</span><span class="p">)</span>
                    <span class="n">sample_percentage_limit</span> <span class="o">=</span> <span class="n">train_sample_rows_test_size</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">train_sample_rows_test_size</span><span class="p">)</span> <span class="o">==</span> <span class="n">train_sample_rows_test_size</span> <span class="ow">and</span> <span class="n">train_sample_rows_test_size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Value of `train_sample_rows_test_size` parameter&#39;</span>
                          <span class="s1">&#39;will be passed as `sample_rows_limit`.&#39;</span><span class="p">)</span>
                    <span class="n">sample_rows_limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">train_sample_rows_test_size</span><span class="p">)</span>
                <span class="n">train_sample_rows_test_size</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">sample_rows_limit</span> <span class="ow">or</span> <span class="n">sample_percentage_limit</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Parameter `train_sample_rows_test_size` will be ignored.&#39;</span><span class="p">)</span>
                <span class="n">train_sample_rows_test_size</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">translate_str_imputation_param</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span> <span class="ow">and</span> <span class="n">prediction_type</span> <span class="o">!=</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ImputationListNotSupported</span><span class="p">()</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">translate_imputation_string_strategy_to_enum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">prediction_type</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">x</span>

        <span class="k">def</span> <span class="nf">translate_str_include_only_estimators_param</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">translate_estimator_string_to_enum</span><span class="p">(</span><span class="n">estimator</span><span class="p">)</span> <span class="k">for</span> <span class="n">estimator</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">translate_str_include_batched_ensemble_estimators_param</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">translate_batched_estimator_string_to_enum</span><span class="p">(</span><span class="n">estimator</span><span class="p">)</span> <span class="k">for</span> <span class="n">estimator</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">translate_str_pipeline_types_param</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">TIMESERIES_ANOMALY_PREDICTION</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">TimeseriesAnomalyPredictionPipelineTypes</span><span class="p">(</span><span class="n">pipeline_type</span><span class="p">)</span> <span class="k">for</span> <span class="n">pipeline_type</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">ForecastingPipelineTypes</span><span class="p">(</span><span class="n">pipeline_type</span><span class="p">)</span> <span class="k">for</span> <span class="n">pipeline_type</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

        <span class="n">categorical_imputation_strategy</span> <span class="o">=</span> <span class="n">translate_str_imputation_param</span><span class="p">(</span><span class="n">categorical_imputation_strategy</span><span class="p">)</span>
        <span class="n">numerical_imputation_strategy</span> <span class="o">=</span> <span class="n">translate_str_imputation_param</span><span class="p">(</span><span class="n">numerical_imputation_strategy</span><span class="p">)</span>
        <span class="n">include_only_estimators</span> <span class="o">=</span> <span class="n">translate_str_include_only_estimators_param</span><span class="p">(</span><span class="n">include_only_estimators</span><span class="p">)</span> <span class="k">if</span> <span class="n">include_only_estimators</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">include_batched_ensemble_estimators</span> <span class="o">=</span> <span class="n">translate_str_include_batched_ensemble_estimators_param</span><span class="p">(</span><span class="n">include_batched_ensemble_estimators</span><span class="p">)</span> <span class="k">if</span> <span class="n">include_batched_ensemble_estimators</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">pipeline_types</span> <span class="o">=</span> <span class="n">translate_str_pipeline_types_param</span><span class="p">(</span><span class="n">pipeline_types</span><span class="p">)</span> <span class="k">if</span> <span class="n">pipeline_types</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">include_batched_ensemble_estimators</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">batched_estimator</span> <span class="ow">in</span> <span class="n">include_batched_ensemble_estimators</span><span class="p">:</span>
                <span class="n">basic_estimator_str</span> <span class="o">=</span> <span class="n">batched_estimator</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">basic_estimator</span> <span class="o">=</span> <span class="n">translate_estimator_string_to_enum</span><span class="p">(</span><span class="n">basic_estimator_str</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">include_only_estimators</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">basic_estimator</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">include_only_estimators</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">MissingEstimatorForExistingBatchedEstimator</span><span class="p">(</span><span class="n">batched_estimator</span><span class="p">,</span> <span class="n">basic_estimator</span><span class="p">)</span>

        <span class="n">validate_optimizer_enum_values</span><span class="p">(</span>
            <span class="n">prediction_type</span><span class="o">=</span><span class="n">prediction_type</span><span class="p">,</span>
            <span class="n">daub_include_only_estimators</span><span class="o">=</span><span class="n">daub_include_only_estimators</span><span class="p">,</span>
            <span class="n">include_only_estimators</span><span class="o">=</span><span class="n">include_only_estimators</span><span class="p">,</span>
            <span class="n">include_batched_ensemble_estimators</span><span class="o">=</span><span class="n">include_batched_ensemble_estimators</span><span class="p">,</span>
            <span class="n">cognito_transform_names</span><span class="o">=</span><span class="n">cognito_transform_names</span><span class="p">,</span>
            <span class="n">imputation_strategies</span><span class="o">=</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="n">categorical_imputation_strategy</span><span class="p">,</span> <span class="n">numerical_imputation_strategy</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">y</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span> <span class="k">else</span> <span class="p">[</span><span class="n">y</span><span class="p">])],</span>
            <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">,</span>
            <span class="n">t_shirt_size</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;t_shirt_size&quot;</span><span class="p">,</span> <span class="n">TShirtSize</span><span class="o">.</span><span class="n">M</span><span class="p">),</span>
            <span class="n">is_cpd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">daub_give_priority_to_runtime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">daub_give_priority_to_runtime</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">daub_give_priority_to_runtime</span> <span class="o">&gt;</span> <span class="mf">5.0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ParamOutOfRange</span><span class="p">(</span><span class="s1">&#39;daub_give_priority_to_runtime&#39;</span><span class="p">,</span> <span class="n">daub_give_priority_to_runtime</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">data_join_graph</span><span class="p">:</span>
            <span class="n">data_join_graph</span><span class="o">.</span><span class="n">problem_type</span> <span class="o">=</span> <span class="n">prediction_type</span>
            <span class="n">data_join_graph</span><span class="o">.</span><span class="n">target_column</span> <span class="o">=</span> <span class="n">prediction_column</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">BINARY</span> <span class="ow">and</span> <span class="n">scoring</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">PositiveLabelClass</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">positive_label</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">MissingPositiveLabel</span><span class="p">(</span><span class="n">scoring</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">scoring</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2"> needs a </span><span class="se">\&quot;</span><span class="s2">positive_label</span><span class="se">\&quot;</span><span class="s2"> &quot;</span>
                                                       <span class="sa">f</span><span class="s2">&quot;parameter to be defined when used with binary classification.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;t_shirt_size&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LocalInstanceButRemoteParameter</span><span class="p">(</span>
                <span class="s2">&quot;t_shirt_size&quot;</span><span class="p">,</span>
                <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;During LocalOptimizer initialization, </span><span class="se">\&quot;</span><span class="s2">t_shirt_size</span><span class="se">\&quot;</span><span class="s2"> parameter was provided. &quot;</span>
                       <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">t_shirt_size</span><span class="se">\&quot;</span><span class="s2"> parameter is only applicable to the RemoteOptimizer instance.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">FORECASTING</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ForecastingCannotBeRunAsLocalScenario</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">prediction_type</span> <span class="o">==</span> <span class="n">PredictionType</span><span class="o">.</span><span class="n">TIMESERIES_ANOMALY_PREDICTION</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">TimeseriesAnomalyPredictionCannotBeRunAsLocalScenario</span><span class="p">()</span>

            <span class="n">reduced_kwargs</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;_force_local_scenario&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">reduced_kwargs</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">reduced_kwargs</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>

            <span class="n">validate_additional_params_for_optimizer</span><span class="p">(</span><span class="n">reduced_kwargs</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">LocalAutoPipelines</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">prediction_type</span><span class="o">=</span><span class="s1">&#39;classification&#39;</span> <span class="k">if</span> <span class="n">prediction_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span> <span class="s1">&#39;multiclass&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="n">prediction_type</span><span class="p">,</span>
                <span class="n">prediction_column</span><span class="o">=</span><span class="n">prediction_column</span><span class="p">,</span>
                <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">,</span>
                <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span>
                <span class="n">holdout_size</span><span class="o">=</span><span class="n">holdout_size</span><span class="p">,</span>
                <span class="n">max_num_daub_ensembles</span><span class="o">=</span><span class="n">max_number_of_estimators</span><span class="p">,</span>
                <span class="n">train_sample_rows_test_size</span><span class="o">=</span><span class="n">train_sample_rows_test_size</span><span class="p">,</span>
                <span class="n">include_only_estimators</span><span class="o">=</span><span class="n">include_only_estimators</span><span class="p">,</span>
                <span class="n">include_batched_ensemble_estimators</span><span class="o">=</span><span class="n">include_batched_ensemble_estimators</span><span class="p">,</span>
                <span class="n">cognito_transform_names</span><span class="o">=</span><span class="n">cognito_transform_names</span><span class="p">,</span>
                <span class="n">positive_label</span><span class="o">=</span><span class="n">positive_label</span><span class="p">,</span>
                <span class="n">_force_local_scenario</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;_force_local_scenario&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
                <span class="o">**</span><span class="n">reduced_kwargs</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">reduced_kwargs</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;t_shirt_size&#39;</span><span class="p">,</span> <span class="s1">&#39;notebooks&#39;</span><span class="p">,</span> <span class="s1">&#39;autoai_pod_version&#39;</span><span class="p">,</span> <span class="s1">&#39;obm_pod_version&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">reduced_kwargs</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">reduced_kwargs</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>

            <span class="n">validate_additional_params_for_optimizer</span><span class="p">(</span><span class="n">reduced_kwargs</span><span class="p">)</span>

            <span class="n">engine</span> <span class="o">=</span> <span class="n">WMLEngine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_20_class_limit_removal_test</span><span class="p">:</span>
                <span class="n">engine</span><span class="o">.</span><span class="n">_20_class_limit_removal_test</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="n">optimizer</span> <span class="o">=</span> <span class="n">RemoteAutoPipelines</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">prediction_type</span><span class="o">=</span><span class="n">prediction_type</span><span class="p">,</span>
                <span class="n">prediction_column</span><span class="o">=</span><span class="n">prediction_column</span><span class="p">,</span>
                <span class="n">prediction_columns</span><span class="o">=</span><span class="n">prediction_columns</span><span class="p">,</span>
                <span class="n">timestamp_column_name</span><span class="o">=</span><span class="n">timestamp_column_name</span><span class="p">,</span>
                <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">,</span>
                <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span>
                <span class="n">holdout_size</span><span class="o">=</span><span class="n">holdout_size</span><span class="p">,</span>
                <span class="n">max_num_daub_ensembles</span><span class="o">=</span><span class="n">max_number_of_estimators</span><span class="p">,</span>
                <span class="n">t_shirt_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">restrict_pod_size</span><span class="p">(</span><span class="n">t_shirt_size</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="s1">&#39;t_shirt_size&#39;</span><span class="p">,</span> <span class="n">TShirtSize</span><span class="o">.</span><span class="n">M</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP</span> <span class="k">else</span> <span class="n">TShirtSize</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
                <span class="p">),</span>
                <span class="n">train_sample_rows_test_size</span><span class="o">=</span><span class="n">train_sample_rows_test_size</span><span class="p">,</span>
                <span class="n">include_only_estimators</span><span class="o">=</span><span class="n">include_only_estimators</span><span class="p">,</span>
                <span class="n">include_batched_ensemble_estimators</span><span class="o">=</span><span class="n">include_batched_ensemble_estimators</span><span class="p">,</span>
                <span class="n">backtest_num</span><span class="o">=</span><span class="n">backtest_num</span><span class="p">,</span>
                <span class="n">lookback_window</span><span class="o">=</span><span class="n">lookback_window</span><span class="p">,</span>
                <span class="n">forecast_window</span><span class="o">=</span><span class="n">forecast_window</span><span class="p">,</span>
                <span class="n">backtest_gap_length</span><span class="o">=</span><span class="n">backtest_gap_length</span><span class="p">,</span>
                <span class="n">cognito_transform_names</span><span class="o">=</span><span class="n">cognito_transform_names</span><span class="p">,</span>
                <span class="n">data_join_graph</span><span class="o">=</span><span class="n">data_join_graph</span><span class="p">,</span>
                <span class="n">drop_duplicates</span><span class="o">=</span><span class="n">drop_duplicates</span><span class="p">,</span>
                <span class="n">outliers_columns</span><span class="o">=</span><span class="n">outliers_columns</span><span class="p">,</span>
                <span class="n">text_processing</span><span class="o">=</span><span class="n">text_processing</span><span class="p">,</span>
                <span class="n">word2vec_feature_number</span><span class="o">=</span><span class="n">word2vec_feature_number</span><span class="p">,</span>
                <span class="n">csv_separator</span><span class="o">=</span><span class="n">csv_separator</span><span class="p">,</span>
                <span class="n">excel_sheet</span><span class="o">=</span><span class="n">excel_sheet</span><span class="p">,</span>
                <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span>
                <span class="n">positive_label</span><span class="o">=</span><span class="n">positive_label</span><span class="p">,</span>
                <span class="n">data_join_only</span><span class="o">=</span><span class="n">data_join_only</span><span class="p">,</span>
                <span class="n">engine</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span>
                <span class="n">daub_give_priority_to_runtime</span><span class="o">=</span><span class="n">daub_give_priority_to_runtime</span><span class="p">,</span>
                <span class="n">notebooks</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;notebooks&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                <span class="n">autoai_pod_version</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;autoai_pod_version&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                <span class="n">obm_pod_version</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;obm_pod_version&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                <span class="n">fairness_info</span><span class="o">=</span><span class="n">fairness_info</span><span class="p">,</span>
                <span class="n">sampling_type</span><span class="o">=</span><span class="n">sampling_type</span><span class="p">,</span>
                <span class="n">sample_size_limit</span><span class="o">=</span><span class="n">sample_size_limit</span><span class="p">,</span>
                <span class="n">sample_rows_limit</span><span class="o">=</span><span class="n">sample_rows_limit</span><span class="p">,</span>
                <span class="n">sample_percentage_limit</span><span class="o">=</span><span class="n">sample_percentage_limit</span><span class="p">,</span>
                <span class="n">number_of_batch_rows</span><span class="o">=</span><span class="n">number_of_batch_rows</span><span class="p">,</span>
                <span class="n">n_parallel_data_connections</span><span class="o">=</span><span class="n">n_parallel_data_connections</span><span class="p">,</span>
                <span class="n">categorical_imputation_strategy</span><span class="o">=</span><span class="n">categorical_imputation_strategy</span><span class="p">,</span>
                <span class="n">numerical_imputation_strategy</span><span class="o">=</span><span class="n">numerical_imputation_strategy</span><span class="p">,</span>
                <span class="n">numerical_imputation_value</span><span class="o">=</span><span class="n">numerical_imputation_value</span><span class="p">,</span>
                <span class="n">imputation_threshold</span><span class="o">=</span><span class="n">imputation_threshold</span><span class="p">,</span>
                <span class="n">retrain_on_holdout</span><span class="o">=</span><span class="n">retrain_on_holdout</span><span class="p">,</span>
                <span class="n">numerical_columns</span><span class="o">=</span><span class="n">numerical_columns</span><span class="p">,</span>
                <span class="n">categorical_columns</span><span class="o">=</span><span class="n">categorical_columns</span><span class="p">,</span>
                <span class="n">feature_columns</span><span class="o">=</span><span class="n">feature_columns</span><span class="p">,</span>
                <span class="n">pipeline_types</span><span class="o">=</span><span class="n">pipeline_types</span><span class="p">,</span>
                <span class="n">supporting_features_at_forecast</span><span class="o">=</span><span class="n">supporting_features_at_forecast</span><span class="p">,</span>
                <span class="n">test_data_csv_separator</span><span class="o">=</span><span class="n">test_data_csv_separator</span><span class="p">,</span>
                <span class="n">test_data_excel_sheet</span><span class="o">=</span><span class="n">test_data_excel_sheet</span><span class="p">,</span>
                <span class="n">test_data_encoding</span><span class="o">=</span><span class="n">test_data_encoding</span><span class="p">,</span>
                <span class="n">confidence_level</span><span class="o">=</span><span class="n">confidence_level</span><span class="p">,</span>
                <span class="n">incremental_learning</span><span class="o">=</span><span class="n">incremental_learning</span><span class="p">,</span>
                <span class="n">early_stop_enabled</span><span class="o">=</span><span class="n">early_stop_enabled</span><span class="p">,</span>
                <span class="n">early_stop_window_size</span><span class="o">=</span><span class="n">early_stop_window_size</span><span class="p">,</span>
                <span class="o">**</span><span class="n">reduced_kwargs</span>
            <span class="p">)</span>
            <span class="n">optimizer</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span>
            <span class="k">return</span> <span class="n">optimizer</span></div>

    <span class="k">def</span> <span class="nf">_init_estimator_enums</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="o">.</span><span class="n">ICP</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ClassificationAlgorithms</span> <span class="o">=</span> <span class="n">ClassificationAlgorithmsCP4D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RegressionAlgorithms</span> <span class="o">=</span> <span class="n">RegressionAlgorithmsCP4D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ForecastingAlgorithms</span> <span class="o">=</span> <span class="n">ForecastingAlgorithmsCP4D</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ClassificationAlgorithms</span> <span class="o">=</span> <span class="n">ClassificationAlgorithms</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RegressionAlgorithms</span> <span class="o">=</span> <span class="n">RegressionAlgorithms</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ForecastingAlgorithms</span> <span class="o">=</span> <span class="n">ForecastingAlgorithms</span>

    <span class="k">def</span> <span class="nf">_block_autoai_on_git_based_project</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Raises ForbiddenActionForGitBasedProject error for AutoAI experiments on git based project.</span>
<span class="sd">        It can be disabled by setting environment variable ENABLE_AUTOAI to &#39;true&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">wml_client</span><span class="p">,</span> <span class="s1">&#39;project_type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;local_git_storage&#39;</span> \
                    <span class="ow">and</span> <span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ENABLE_AUTOAI&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;false&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ForbiddenActionForGitBasedProject</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Creating AutoAI experiment is not supported for git based project.&quot;</span><span class="p">)</span></div>


</pre></div>

          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2018-2023, IBM.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>